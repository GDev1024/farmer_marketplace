option_settings:
  aws:elasticbeanstalk:container:php:phpini:
    document_root: /root
    memory_limit: 256M
    zlib.output_compression: "Off"
    allow_url_fopen: "On"
    display_errors: "Off"
    max_execution_time: 60
    upload_max_filesize: 10M
    post_max_size: 10M
  
  aws:elasticbeanstalk:application:environment:
    APP_ENV: production
    DB_HOST: your-rds-endpoint.amazonaws.com
    DB_NAME: grenada_marketplace_prod
    # DB_USER and DB_PASS should be set in EB environment configuration
    AWS_REGION: us-east-1
    # AWS credentials will be handled by IAM roles
    SITE_URL: https://your-domain.com
    UPLOAD_PATH: uploads/
    MAX_FILE_SIZE: 10485760
    SESSION_LIFETIME: 7200
    BCRYPT_COST: 12

commands:
  01_install_composer:
    command: "curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer"
    ignoreErrors: true

container_commands:
  01_create_uploads_dir:
    command: "mkdir -p /var/app/ondeck/root/uploads && chmod 755 /var/app/ondeck/root/uploads"
  02_set_permissions:
    command: "chmod -R 755 /var/app/ondeck/root"