<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Design Testing</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-header {
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 16px;
            margin-bottom: 24px;
        }
        .viewport-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .viewport-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .viewport-btn:hover {
            background: #2563eb;
        }
        .viewport-btn.active {
            background: #1d4ed8;
        }
        .test-viewport {
            border: 2px solid #ddd;
            margin: 20px 0;
            background: white;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .viewport-info {
            background: #f8fafc;
            padding: 10px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 14px;
            font-weight: 500;
        }
        .test-results {
            margin-top: 20px;
        }
        .test-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        .test-status {
            width: 80px;
            font-weight: bold;
            margin-right: 16px;
        }
        .test-pass { color: #22c55e; }
        .test-fail { color: #ef4444; }
        .test-pending { color: #f59e0b; }
        .test-name {
            flex: 1;
            font-weight: 500;
        }
        .test-description {
            color: #666;
            font-size: 14px;
        }
        .run-tests-btn {
            background: #22c55e;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin-bottom: 20px;
        }
        .run-tests-btn:hover {
            background: #16a34a;
        }
        .results-summary {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 16px;
            margin-top: 20px;
        }
        .current-viewport {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 4px;
            padding: 12px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>Responsive Design Testing</h1>
            <p>Testing responsive behavior across mobile, tablet, and desktop viewports.</p>
            <button class="run-tests-btn" onclick="runAllTests()">Run All Tests</button>
        </div>

        <div class="current-viewport" id="current-viewport">
            <strong>Current Viewport:</strong> <span id="viewport-size"></span>
        </div>

        <div class="viewport-controls">
            <button class="viewport-btn" onclick="setViewport(320, 568, 'Mobile Portrait')">Mobile Portrait (320px)</button>
            <button class="viewport-btn" onclick="setViewport(375, 667, 'iPhone')">iPhone (375px)</button>
            <button class="viewport-btn" onclick="setViewport(414, 896, 'iPhone Plus')">iPhone Plus (414px)</button>
            <button class="viewport-btn" onclick="setViewport(768, 1024, 'Tablet Portrait')">Tablet Portrait (768px)</button>
            <button class="viewport-btn" onclick="setViewport(1024, 768, 'Tablet Landscape')">Tablet Landscape (1024px)</button>
            <button class="viewport-btn" onclick="setViewport(1200, 800, 'Desktop')">Desktop (1200px)</button>
            <button class="viewport-btn" onclick="setViewport(1920, 1080, 'Large Desktop')">Large Desktop (1920px)</button>
        </div>

        <div class="test-results">
            <h3>Responsive Design Test Results</h3>
            
            <div class="test-item">
                <span class="test-status test-pending" id="status-viewport-meta">PENDING</span>
                <div>
                    <div class="test-name">Viewport Meta Tag</div>
                    <div class="test-description">Check for proper viewport meta tag configuration</div>
                </div>
            </div>

            <div class="test-item">
                <span class="test-status test-pending" id="status-mobile-breakpoints">PENDING</span>
                <div>
                    <div class="test-name">Mobile Breakpoints (320px-639px)</div>
                    <div class="test-description">Test layout and usability on mobile devices</div>
                </div>
            </div>

            <div class="test-item">
                <span class="test-status test-pending" id="status-tablet-breakpoints">PENDING</span>
                <div>
                    <div class="test-name">Tablet Breakpoints (640px-1023px)</div>
                    <div class="test-description">Test layout and usability on tablet devices</div>
                </div>
            </div>

            <div class="test-item">
                <span class="test-status test-pending" id="status-desktop-breakpoints">PENDING</span>
                <div>
                    <div class="test-name">Desktop Breakpoints (1024px+)</div>
                    <div class="test-description">Test layout and usability on desktop devices</div>
                </div>
            </div>

            <div class="test-item">
                <span class="test-status test-pending" id="status-touch-targets">PENDING</span>
                <div>
                    <div class="test-name">Touch Target Sizes</div>
                    <div class="test-description">Verify touch targets meet minimum 44px requirement</div>
                </div>
            </div>

            <div class="test-item">
                <span class="test-status test-pending" id="status-text-readability">PENDING</span>
                <div>
                    <div class="test-name">Text Readability</div>
                    <div class="test-description">Check text size and line height across viewports</div>
                </div>
            </div>

            <div class="test-item">
                <span class="test-status test-pending" id="status-navigation-mobile">PENDING</span>
                <div>
                    <div class="test-name">Mobile Navigation</div>
                    <div class="test-description">Test mobile menu functionality and accessibility</div>
                </div>
            </div>

            <div class="test-item">
                <span class="test-status test-pending" id="status-content-flow">PENDING</span>
                <div>
                    <div class="test-name">Content Flow</div>
                    <div class="test-description">Verify content reflows properly at different sizes</div>
                </div>
            </div>

            <div class="test-item">
                <span class="test-status test-pending" id="status-images-responsive">PENDING</span>
                <div>
                    <div class="test-name">Responsive Images</div>
                    <div class="test-description">Check images scale properly and don't overflow</div>
                </div>
            </div>
        </div>

        <div class="results-summary" id="results-summary" style="display: none;">
            <h3>Test Results Summary</h3>
            <div id="summary-content"></div>
        </div>
    </div>

    <!-- Test viewport iframe -->
    <div class="test-viewport" id="test-viewport" style="display: none;">
        <div class="viewport-info" id="viewport-info"></div>
        <iframe id="test-frame" src="../index.php" style="width: 100%; height: 600px; border: none;"></iframe>
    </div>

    <script>
        let testResults = {};
        let totalTests = 9;
        let currentViewportWidth = window.innerWidth;

        function updateViewportSize() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            document.getElementById('viewport-size').textContent = `${width}px × ${height}px`;
            currentViewportWidth = width;
        }

        function setViewport(width, height, name) {
            // Update active button
            document.querySelectorAll('.viewport-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Show test viewport
            const testViewport = document.getElementById('test-viewport');
            const viewportInfo = document.getElementById('viewport-info');
            const testFrame = document.getElementById('test-frame');

            testViewport.style.display = 'block';
            testViewport.style.width = width + 'px';
            testViewport.style.height = (height + 40) + 'px'; // +40 for info bar

            viewportInfo.textContent = `${name}: ${width}px × ${height}px`;
            testFrame.style.width = width + 'px';
            testFrame.style.height = height + 'px';

            currentViewportWidth = width;

            // Re-run tests for this viewport
            setTimeout(() => {
                runResponsiveTests();
            }, 500);
        }

        async function runAllTests() {
            console.log('Starting responsive design tests...');
            
            // Reset all tests to pending
            document.querySelectorAll('.test-status').forEach(status => {
                status.className = 'test-status test-pending';
                status.textContent = 'RUNNING';
            });

            updateViewportSize();
            await runResponsiveTests();
            showResultsSummary();
        }

        async function runResponsiveTests() {
            await testViewportMeta();
            await testMobileBreakpoints();
            await testTabletBreakpoints();
            await testDesktopBreakpoints();
            await testTouchTargets();
            await testTextReadability();
            await testMobileNavigation();
            await testContentFlow();
            await testResponsiveImages();
        }

        async function testViewportMeta() {
            const testId = 'viewport-meta';
            try {
                const viewportMeta = document.querySelector('meta[name="viewport"]');
                const hasViewport = viewportMeta !== null;
                const hasCorrectContent = viewportMeta && 
                    viewportMeta.content.includes('width=device-width') &&
                    viewportMeta.content.includes('initial-scale=1');

                const success = hasViewport && hasCorrectContent;
                updateTestStatus(testId, success, 
                    success ? 'Viewport meta tag configured correctly' : 'Viewport meta tag missing or incorrect');
            } catch (error) {
                updateTestStatus(testId, false, `Error: ${error.message}`);
            }
        }

        async function testMobileBreakpoints() {
            const testId = 'mobile-breakpoints';
            try {
                const isMobileViewport = currentViewportWidth >= 320 && currentViewportWidth <= 639;
                
                if (!isMobileViewport) {
                    updateTestStatus(testId, true, 'Not in mobile viewport range');
                    return;
                }

                // Test mobile-specific features
                const testElement = document.createElement('div');
                testElement.style.width = '100%';
                testElement.style.padding = '16px';
                document.body.appendChild(testElement);

                const computedStyle = getComputedStyle(testElement);
                const hasProperPadding = parseInt(computedStyle.paddingLeft) >= 16;

                document.body.removeChild(testElement);

                updateTestStatus(testId, hasProperPadding, 
                    hasProperPadding ? 'Mobile layout working correctly' : 'Mobile layout issues detected');
            } catch (error) {
                updateTestStatus(testId, false, `Error: ${error.message}`);
            }
        }

        async function testTabletBreakpoints() {
            const testId = 'tablet-breakpoints';
            try {
                const isTabletViewport = currentViewportWidth >= 640 && currentViewportWidth <= 1023;
                
                if (!isTabletViewport) {
                    updateTestStatus(testId, true, 'Not in tablet viewport range');
                    return;
                }

                // Test tablet-specific layout
                const supportsFlexbox = CSS.supports('display', 'flex');
                const supportsGrid = CSS.supports('display', 'grid');

                const success = supportsFlexbox || supportsGrid;
                updateTestStatus(testId, success, 
                    success ? 'Tablet layout support available' : 'Tablet layout support issues');
            } catch (error) {
                updateTestStatus(testId, false, `Error: ${error.message}`);
            }
        }

        async function testDesktopBreakpoints() {
            const testId = 'desktop-breakpoints';
            try {
                const isDesktopViewport = currentViewportWidth >= 1024;
                
                if (!isDesktopViewport) {
                    updateTestStatus(testId, true, 'Not in desktop viewport range');
                    return;
                }

                // Test desktop-specific features
                const supportsHover = window.matchMedia('(hover: hover)').matches;
                const hasWideLayout = currentViewportWidth >= 1024;

                const success = supportsHover && hasWideLayout;
                updateTestStatus(testId, success, 
                    success ? 'Desktop layout working correctly' : 'Desktop layout issues detected');
            } catch (error) {
                updateTestStatus(testId, false, `Error: ${error.message}`);
            }
        }

        async function testTouchTargets() {
            const testId = 'touch-targets';
            try {
                // Create test button elements
                const testButton = document.createElement('button');
                testButton.textContent = 'Test Button';
                testButton.style.padding = '12px 16px';
                testButton.style.minHeight = '44px';
                testButton.style.minWidth = '44px';
                document.body.appendChild(testButton);

                const computedStyle = getComputedStyle(testButton);
                const height = parseInt(computedStyle.height);
                const width = parseInt(computedStyle.width);

                document.body.removeChild(testButton);

                const meetsMinimumSize = height >= 44 && width >= 44;
                updateTestStatus(testId, meetsMinimumSize, 
                    meetsMinimumSize ? 'Touch targets meet minimum 44px requirement' : 'Touch targets too small');
            } catch (error) {
                updateTestStatus(testId, false, `Error: ${error.message}`);
            }
        }

        async function testTextReadability() {
            const testId = 'text-readability';
            try {
                const testText = document.createElement('p');
                testText.textContent = 'Sample text for readability testing';
                testText.style.fontSize = '16px';
                testText.style.lineHeight = '1.5';
                document.body.appendChild(testText);

                const computedStyle = getComputedStyle(testText);
                const fontSize = parseInt(computedStyle.fontSize);
                const lineHeight = parseFloat(computedStyle.lineHeight);

                document.body.removeChild(testText);

                const isReadable = fontSize >= 16 && lineHeight >= fontSize * 1.4;
                updateTestStatus(testId, isReadable, 
                    isReadable ? 'Text readability meets standards' : 'Text readability issues detected');
            } catch (error) {
                updateTestStatus(testId, false, `Error: ${error.message}`);
            }
        }

        async function testMobileNavigation() {
            const testId = 'navigation-mobile';
            try {
                const isMobile = currentViewportWidth < 768;
                
                if (!isMobile) {
                    updateTestStatus(testId, true, 'Not in mobile viewport');
                    return;
                }

                // Test mobile navigation structure
                const testNav = document.createElement('nav');
                testNav.innerHTML = `
                    <button class="nav-toggle" aria-label="Toggle navigation">☰</button>
                    <ul class="nav-links">
                        <li><a href="#">Link 1</a></li>
                        <li><a href="#">Link 2</a></li>
                    </ul>
                `;

                const navToggle = testNav.querySelector('.nav-toggle');
                const navLinks = testNav.querySelector('.nav-links');
                const hasAriaLabel = navToggle && navToggle.hasAttribute('aria-label');

                const success = navToggle && navLinks && hasAriaLabel;
                updateTestStatus(testId, success, 
                    success ? 'Mobile navigation structure correct' : 'Mobile navigation issues detected');
            } catch (error) {
                updateTestStatus(testId, false, `Error: ${error.message}`);
            }
        }

        async function testContentFlow() {
            const testId = 'content-flow';
            try {
                // Test content reflow
                const testContainer = document.createElement('div');
                testContainer.style.width = '100%';
                testContainer.style.maxWidth = '1200px';
                testContainer.style.margin = '0 auto';
                testContainer.innerHTML = `
                    <div style="display: flex; flex-wrap: wrap; gap: 16px;">
                        <div style="flex: 1; min-width: 300px;">Content 1</div>
                        <div style="flex: 1; min-width: 300px;">Content 2</div>
                    </div>
                `;
                document.body.appendChild(testContainer);

                const flexContainer = testContainer.querySelector('div');
                const computedStyle = getComputedStyle(flexContainer);
                const supportsFlexWrap = computedStyle.flexWrap === 'wrap';

                document.body.removeChild(testContainer);

                updateTestStatus(testId, supportsFlexWrap, 
                    supportsFlexWrap ? 'Content flow working correctly' : 'Content flow issues detected');
            } catch (error) {
                updateTestStatus(testId, false, `Error: ${error.message}`);
            }
        }

        async function testResponsiveImages() {
            const testId = 'images-responsive';
            try {
                const testImg = document.createElement('img');
                testImg.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2RkZCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5UZXN0IEltYWdlPC90ZXh0Pjwvc3ZnPg==';
                testImg.style.maxWidth = '100%';
                testImg.style.height = 'auto';
                testImg.style.width = '400px';
                document.body.appendChild(testImg);

                await new Promise(resolve => {
                    testImg.onload = resolve;
                    testImg.onerror = resolve;
                });

                const computedStyle = getComputedStyle(testImg);
                const maxWidth = computedStyle.maxWidth;
                const height = computedStyle.height;

                document.body.removeChild(testImg);

                const isResponsive = maxWidth === '100%' && height === 'auto';
                updateTestStatus(testId, isResponsive, 
                    isResponsive ? 'Images are responsive' : 'Image responsiveness issues detected');
            } catch (error) {
                updateTestStatus(testId, false, `Error: ${error.message}`);
            }
        }

        function updateTestStatus(testId, passed, message) {
            const statusElement = document.getElementById(`status-${testId}`);
            if (statusElement) {
                statusElement.className = `test-status ${passed ? 'test-pass' : 'test-fail'}`;
                statusElement.textContent = passed ? 'PASS' : 'FAIL';
            }
            
            testResults[testId] = { passed, message };
            console.log(`Test ${testId}: ${passed ? 'PASS' : 'FAIL'} - ${message}`);
        }

        function showResultsSummary() {
            const summaryContainer = document.getElementById('results-summary');
            const summaryContent = document.getElementById('summary-content');
            
            const passedTests = Object.values(testResults).filter(result => result.passed).length;
            const failedTests = totalTests - passedTests;
            const successRate = Math.round((passedTests / totalTests) * 100);
            
            summaryContent.innerHTML = `
                <p><strong>Current Viewport:</strong> ${currentViewportWidth}px</p>
                <p><strong>Total Tests:</strong> ${totalTests}</p>
                <p><strong>Passed:</strong> ${passedTests}</p>
                <p><strong>Failed:</strong> ${failedTests}</p>
                <p><strong>Success Rate:</strong> ${successRate}%</p>
                ${successRate >= 90 ? 
                    '<p style="color: #22c55e; font-weight: bold;">✅ Excellent responsive design!</p>' : 
                    successRate >= 75 ?
                    '<p style="color: #f59e0b; font-weight: bold;">⚠️ Good responsive design with minor issues.</p>' :
                    '<p style="color: #ef4444; font-weight: bold;">❌ Significant responsive design issues detected.</p>'
                }
                <div style="margin-top: 16px; padding: 12px; background: #f8fafc; border-radius: 4px; font-family: monospace; font-size: 14px;">
                    <strong>Detailed Results:</strong><br>
                    ${Object.entries(testResults).map(([test, result]) => 
                        `${test}: ${result.passed ? 'PASS' : 'FAIL'} - ${result.message}`
                    ).join('<br>')}
                </div>
            `;
            
            summaryContainer.style.display = 'block';
        }

        // Initialize
        window.addEventListener('load', () => {
            updateViewportSize();
            setTimeout(() => {
                console.log('Auto-running responsive design tests...');
                runAllTests();
            }, 1000);
        });

        window.addEventListener('resize', updateViewportSize);
    </script>
</body>
</html>